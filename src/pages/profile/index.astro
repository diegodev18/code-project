---
import Layout from "@/layouts/Layout.astro";
import ProfileComponent from "@/components/profileComponent.astro";
import Login from "@/components/login.astro";
import getSession from "@/utils/getSession";

const certificates: { title: string; description: string; img: { src: string; alt: string } }[] = [];

const { user_metadata } = await getSession(Astro);

console.log(user_metadata);
---

<Layout
title="Profile"
description="Profile page"
>
    {
        user_metadata ?
        <ProfileComponent
        name={user_metadata.full_name ?? "Cool name"}
        username={user_metadata.user_name ?? "Cool username"}
        img={user_metadata.avatar_url ?? ""}
        link={user_metadata.user_name ? `https://github.com/${user_metadata.user_name}` : "https://github.com/"}
        certificates={certificates ?? []}
        /> :
        <Login
        fullHeight={true}
        />
    }
</Layout>