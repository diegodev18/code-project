---
import Layout from "@/layouts/Layout.astro";
import ProfileComponent from "@/components/profileComponent.astro";
import Adv from "@/components/adv.astro";
import Profiles from "@/db/profiles";

const params = Astro.params;

const session = Profiles.find((profile) => profile.acc_id.toString() === params.acc_id);
---
<Layout
title={session?.name ?? "Profile - CodeProject"}
description={`Pagina de perfil de ${session?.name ?? "CodeProject"}`}
>
    {
        session ?
        <ProfileComponent
        name={session?.name ?? "Cool name"}
        username={session?.id ?? "Cool username"}
        img={session?.img ?? ""}
        link={session?.id ? `https://github.com/${session?.id}` : "https://github.com/"}
        certificates={session.certificates ?? []}
        />
        :
        <Adv title="404 - Perfil no encontrado" description="No se ha encontrado el perfil :(. Revisa que la url este correcta!" />
    }
</Layout>
