---
import Layout from "../layouts/Layout.astro";
import ProfileComp from "../components/profile.astro";
import Login from "../components/login.astro";
import { getSession } from "auth-astro/server";

const certificates: { title: string; description: string; img: { src: string; alt: string } }[] = [];

const session = await getSession(Astro.request);
---

<Layout
title="Profile"
description="Profile page"
>
    {
        session ?
        <ProfileComp
        name={session.user?.name ?? "Cool name"}
        username={session.user?.id ?? "Cool username"}
        img={session.user?.image ?? ""}
        link={session.user?.id ? `https://github.com/${session.user?.id}` : "https://github.com/"}
        certificates={certificates ?? []}
        /> :
        <Login
        />
    }
</Layout>