---
import getSession from '@/utils/getSession';
import getLangIcon from '@/utils/getLangIcon';

const session = await getSession(Astro);
const uuid = session?.id;

interface Props {
    id: string;
    lenguages: string[]
}
const { id, lenguages } = Astro.props; // `/projects/${id}/${lang}/inicio`
---

<div class="overflow-x-scroll w-full">
    <form
    action="/api/db/progress"
    method="POST"
    class="flex lg:justify-center gap-x-4 py-4"
    >
        {
            lenguages.map((lang: string) => {
                const { component: Icon, width, height } = getLangIcon(lang);
                if (!Icon) return null;
    
                return (
                    <button
                    class="md:hover:scale-125 transition ease-in-out duration-300"
                    name="progressItem"
                    value={`{"id_project": "${id}", "status": 1, "lang": "${lang}", "uuid": "${uuid}"}`}
                    type="submit"
                    >
                        <Icon width={width ?? 50} height={height ?? 50} />
                    </button>
                )
            })
        }
    </form>
</div>