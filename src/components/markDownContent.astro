---
interface Props {
  content: string;
}
const { content } = Astro.props;
---

<article
  class="relative prose prose-invert pt-5 max-w-none *:my-3 prose-pre:cursor-pointer prose-h1:text-[2rem] **:first:!mt-0 **:last:!mb-0"
  id="markdown-content"
  set:html={content}
/>

<script>
  const $pre = document.querySelectorAll("#markdown-content pre");
  $pre.forEach((pre) => {
    const item = document.createElement("div");
    item.innerText = "Click to Copy";
    item.classList.add(
      "absolute",
      "right-0",
      "px-2",
      "rounded-2xl",
      "text-yellow-300",
      "bg-dark-primary",
      "z-10",
      "group-hover:opacity-100",
      "opacity-0",
      "transition",
    );
    pre.classList.add("group");
    pre.appendChild(item);
    pre.addEventListener("click", () => {
      const $code = pre.querySelector("code");
      if ($code?.textContent) {
        const text = $code.textContent.slice(0, -1);
        window.navigator.clipboard.writeText(text);
      }
    });
  });
</script>

<style>
  #markdown-content {
    code:not(pre code) {
      font-style: italic;
      color: #fde047;
      background-color: #000;
      padding: 2px 5px 1px;
      border-radius: 8px;
      &::before {
        display: none;
      }
      &::after {
        display: none;
      }
    }
  }
</style>
